# RestAPI для Федерации Спортивного Туризма России (ФСТР) #

ФСТР — организация, занимающаяся развитием и популяризацией спортивного туризма в России и руководящая проведением всероссийских соревнований в этом виде спорта.

ТЗ от заказчика: 
=

• разработать мобильное приложение для Android и IOS, которое упростило бы туристам задачу по отправке данных о перевале и сократило время обработки запроса до трёх дней. Пользоваться мобильным приложением будут туристы. В горах они будут вносить данные о перевале в приложение и отправлять их в ФСТР, как только появится доступ в Интернет.

• модератор из Федерации будет верифицировать и вносить в базу данных информацию, полученную от пользователей, а те в свою очередь смогут увидеть в мобильном приложении статус модерации и просматривать базу с объектами, внесёнными другими.

Задачи:
-

Разработка REST API, которое будет обслуживать мобильное приложение;  
Разработка мобильного приложения;  
Тестирование REST API и мобильного приложения.  
Пользователь с помощью мобильного приложения будет передавать в ФСТР:  
-название перевала;  
-координаты перевала и его высота;  
-уровень сложности;  
-имя пользователя;  
-почта и телефон пользователя;  
-одну или несколько фотографий перевала.  

После этого турист нажмёт кнопку «Отправить» в мобильном приложении. Мобильное приложение вызывает метод submitData  REST API.  

GET /submitData/ - получает и выводит информацию о всех записях (перевалах).

POST /submitData/ - заявка на внесение информации об одном горном перевале

Пример JSON с информацией о перевале

>{  
            "beauty_title": "перевал",  
            "title": "Дятлова",  
            "other_titles": "перевал2",  
            "connect": "Уральские горы",  
            "user": {  
                "email": "test@test.ru",  
                "fam": "Иванов",  
                "name": "Альберт",  
                "otc": "Петрович",  
                "phone": "+79559708808"  
            },  
            "level": {  
                "winter": "1A",  
                "summer": "1B",  
                "autumn": "",    
                "spring": ""  
            },  
            "coords": {  
            "latitude": 10.1,  
            "longitude": 10.2,  
            "height": 1000  
            },  
            "images":[{  
               "data": "link",  
              "title": "photo1"  
           }  
           ]  
         }
>
> Результат метода: JSON
    *status — код HTTP, целое число:
        *500 — ошибка при выполнении операции;
        *400 — Bad Request (при нехватке полей);
        *200 — успех.
    *message — строка:
        *Причина ошибки (если она была);
        *Отправлено успешно;
        *Если отправка успешна, дополнительно возвращается id вставленной записи.
        *id — идентификатор, который был присвоен объекту при добавлении в базу данных.

        ***
        GET /submitData/{id} - получение данных о конкретном горном перевале с выводом всей информации
        ***
        PATCH /submitData/{id} - позволяет отредактировать существующую запись (замена), при условии, что она в статусе "new".
        Редактировать можно все поля, кроме тех, что содержат ФИО, адрес почты и номер телефона.
        ***
        GET /api/submitData/user__email=<str:email> - позволяет получить данные всех объектов, отправленных на сервер пользователем с почтой <***str:email***>.
        Фильтрация по адресу электронной почты реализуется с помощью пакета ***django-filter***.
